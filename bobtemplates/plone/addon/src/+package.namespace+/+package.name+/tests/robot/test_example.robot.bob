# ============================================================================
# EXAMPLE ROBOT TESTS
# ============================================================================
#
# Start a single robot test
# 
# make sure the rfbrowser is initialized via 
#
# $ rfbrowser init`
#
# Start the robot server
#
# $ WSGI_SERVER_HOST=localhost WSGI_SERVER_PORT=50003 robot-server {{{ package.dottedname }}}.testing.{{{package.uppercasename}}}_ACCEPTANCE_TESTING
#
# Start the robot test
#
# $ WSGI_SERVER_HOST=localhost WSGI_SERVER_PORT=50003 robot src/{{{ jenkins.directories }}}/tests/robot/test_example.robot
#
# Keyword Documentation: https://marketsquare.github.io/robotframework-browser/Browser.html
# 
# ============================================================================

*** Settings ***

Resource    plone/app/robotframework/browser.robot
Resource    keywords.robot

Library    Remote    ${PLONE_URL}/RobotRemote

Test Setup    Run Keywords    Plone test setup
Test Teardown    Run keywords     Plone test teardown

# disable headless mode for browser
# set the variable BROWSER to chrome or firefox
# *** Variables ***
# ${BROWSER}    chrome

*** Test Cases ***

Scenario: As a member I want to be able to log into the website
    [Documentation]  Example of a BDD-style (Behavior-driven development) test.
    Given a login form
     When I enter valid credentials
     Then I am logged in


*** Keywords ***

# --- Given ------------------------------------------------------------------

a login form
    Go To   ${PLONE_URL}/login_form
    Wait for Condition    Text    //body    contains    Login Name
    Wait for Condition    Text    //body    contains    Password


# --- WHEN -------------------------------------------------------------------

I enter valid credentials
    Type Text    //input[@name="__ac_name"]    admin
    Type Text    //input[@name="__ac_password"]    secret
    Click    //button[@name="buttons.login"]



# --- THEN -------------------------------------------------------------------

I am logged in
    Wait For Condition    Text    //body    contains    You are now logged in
